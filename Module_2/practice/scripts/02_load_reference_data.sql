-- ============================================================
-- Практикум по анализу и моделированию данных
-- Модуль 2. Практическая работа: Моделирование данных
-- Скрипт 2: Загрузка данных в справочные таблицы
-- Предприятие: "Руда+" — добыча железной руды
-- ============================================================

SET search_path TO ruda_plus, public;

-- ============================================================
-- Загрузка справочника шахт (4 записи)
-- ============================================================
INSERT INTO mines (mine_id, mine_name, location, region, max_depth_m, status, opened_date) VALUES
('MINE-01', 'Северная',  '55.234567;60.123456', 'Свердловская область', 850, 'Действующая', '2005-03-15'),
('MINE-02', 'Южная',     '55.198234;60.145678', 'Свердловская область', 620, 'Действующая', '2010-07-20'),
('MINE-03', 'Восточная', '55.312345;60.234567', 'Челябинская область',  450, 'Действующая', '2018-11-01'),
('MINE-04', 'Западная',  '55.156789;60.098765', 'Свердловская область', 300, 'Консервация', '2001-05-10')
ON CONFLICT (mine_id) DO NOTHING;

-- ============================================================
-- Загрузка типов оборудования (6 записей)
-- ============================================================
INSERT INTO equipment_types (type_id, type_name, type_code, description) VALUES
('ET-01', 'Погрузочно-доставочная машина', 'ПДМ', 'Самоходная машина для погрузки и транспортировки руды в подземных выработках'),
('ET-02', 'Шахтный самосвал',             'СС',  'Автосамосвал для перевозки руды по подземным выработкам'),
('ET-03', 'Вагонетка',                    'ВГ',  'Рельсовое транспортное средство для перевозки руды'),
('ET-04', 'Скиповый подъёмник',           'СП',  'Подъёмная установка для выдачи руды на поверхность'),
('ET-05', 'Буровая установка',            'БУ',  'Установка для бурения шпуров и скважин в горных породах'),
('ET-06', 'Вентиляционная установка',     'ВУ',  'Система вентиляции подземных горных выработок')
ON CONFLICT (type_id) DO NOTHING;

-- ============================================================
-- Загрузка операторов (10 записей)
-- ============================================================
INSERT INTO operators (operator_id, last_name, first_name, middle_name, position, qualification, hire_date, mine_id, is_active) VALUES
('OP-001', 'Иванов',    'Алексей',     'Андреевич',      'Машинист ПДМ',          '6 разряд',        '2015-03-10', 'MINE-01', TRUE),
('OP-002', 'Петров',    'Борис',       'Борисович',      'Машинист ПДМ',          '5 разряд',        '2018-06-15', 'MINE-01', TRUE),
('OP-003', 'Сидоров',   'Виктор',      'Владимирович',   'Водитель самосвала',    '6 разряд',        '2012-09-01', 'MINE-01', TRUE),
('OP-004', 'Козлов',    'Геннадий',    'Геннадьевич',    'Водитель самосвала',    '5 разряд',        '2019-01-20', 'MINE-02', TRUE),
('OP-005', 'Новиков',   'Дмитрий',     'Дмитриевич',     'Машинист ПДМ',          '6 разряд',        '2014-11-05', 'MINE-02', TRUE),
('OP-006', 'Морозов',   'Евгений',     'Евгеньевич',     'Оператор подъёмника',   '5 разряд',        '2017-04-12', 'MINE-01', TRUE),
('OP-007', 'Волков',    'Жан',         'Жанович',        'Машинист ПДМ',          '4 разряд',        '2021-02-28', 'MINE-02', TRUE),
('OP-008', 'Соловьёв',  'Захар',       'Захарович',      'Водитель самосвала',    '6 разряд',        '2013-07-18', 'MINE-03', TRUE),
('OP-009', 'Васильев',  'Игорь',       'Игоревич',       'Машинист ПДМ',          '5 разряд',        '2020-05-22', 'MINE-03', TRUE),
('OP-010', 'Зайцев',    'Константин',  'Константинович', 'Механик',               'Инженер-механик',  '2016-08-30', 'MINE-01', TRUE)
ON CONFLICT (operator_id) DO NOTHING;

-- ============================================================
-- Проверка загрузки данных
-- ============================================================
SELECT 'mines' AS table_name, COUNT(*) AS row_count FROM mines
UNION ALL
SELECT 'equipment_types', COUNT(*) FROM equipment_types
UNION ALL
SELECT 'operators', COUNT(*) FROM operators
ORDER BY table_name;
