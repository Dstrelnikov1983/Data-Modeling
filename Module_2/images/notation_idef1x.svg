<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 530" font-family="Segoe UI, Tahoma, sans-serif">
  <defs>
    <filter id="shadow4" x="-5%" y="-5%" width="115%" height="115%">
      <feDropShadow dx="2" dy="2" stdDeviation="3" flood-opacity="0.15"/>
    </filter>
  </defs>

  <!-- Title -->
  <rect x="0" y="0" width="900" height="50" fill="#4472C4" rx="0"/>
  <text x="450" y="33" text-anchor="middle" fill="white" font-size="20" font-weight="700">Нотация IDEF1X</text>

  <!-- Subtitle -->
  <text x="450" y="78" text-anchor="middle" fill="#6c757d" font-size="14">Стандарт FIPS 184. Используется в ERwin Data Modeler. Чёткое разделение PK / non-key атрибутов</text>

  <!-- ===== Independent Entity: mines (квадратные углы) ===== -->
  <g filter="url(#shadow4)">
    <!-- Entity box - square corners = independent -->
    <rect x="70" y="120" width="260" height="230" fill="white" stroke="#4472C4" stroke-width="2.5"/>
    <!-- Name area -->
    <rect x="70" y="120" width="260" height="38" fill="#4472C4"/>
    <text x="200" y="145" text-anchor="middle" fill="white" font-size="16" font-weight="700">MINES</text>
    <!-- PK area (above the line) -->
    <text x="85" y="178" fill="#2c3e50" font-size="13" font-weight="600">mine_id (PK)</text>
    <!-- Separator line (PK / non-key) -->
    <line x1="70" y1="190" x2="330" y2="190" stroke="#4472C4" stroke-width="2"/>
    <!-- Non-key attributes (below the line) -->
    <text x="85" y="215" fill="#2c3e50" font-size="13">mine_name</text>
    <text x="85" y="238" fill="#2c3e50" font-size="13">region</text>
    <text x="85" y="261" fill="#2c3e50" font-size="13">max_depth_m</text>
    <text x="85" y="284" fill="#2c3e50" font-size="13">status</text>
    <text x="85" y="307" fill="#2c3e50" font-size="13">opened_date</text>
  </g>

  <!-- Label: Independent -->
  <rect x="110" y="355" width="140" height="24" fill="#e8f0fe" rx="12"/>
  <text x="180" y="372" text-anchor="middle" fill="#4472C4" font-size="12" font-weight="600">Независимая сущность</text>
  <text x="180" y="392" text-anchor="middle" fill="#6c757d" font-size="11">(квадратные углы)</text>

  <!-- ===== Dependent Entity: equipment (скруглённые углы) ===== -->
  <g filter="url(#shadow4)">
    <!-- Entity box - rounded corners = dependent -->
    <rect x="560" y="120" width="270" height="250" fill="white" stroke="#ED7D31" stroke-width="2.5" rx="16"/>
    <!-- Name area -->
    <rect x="560" y="120" width="270" height="38" fill="#ED7D31" rx="16"/>
    <rect x="560" y="142" width="270" height="16" fill="#ED7D31"/>
    <text x="695" y="145" text-anchor="middle" fill="white" font-size="16" font-weight="700">EQUIPMENT</text>
    <!-- PK area (above the line) - includes migrated FK -->
    <text x="575" y="178" fill="#2c3e50" font-size="13" font-weight="600">equipment_id (PK)</text>
    <text x="575" y="200" fill="#7c3aed" font-size="13" font-weight="600">mine_id (FK)</text>
    <!-- Separator line -->
    <line x1="560" y1="212" x2="830" y2="212" stroke="#ED7D31" stroke-width="2"/>
    <!-- Non-key attributes -->
    <text x="575" y="237" fill="#2c3e50" font-size="13">equipment_name</text>
    <text x="575" y="260" fill="#2c3e50" font-size="13">type_id (FK)</text>
    <text x="575" y="283" fill="#2c3e50" font-size="13">manufacturer</text>
    <text x="575" y="306" fill="#2c3e50" font-size="13">status</text>
    <text x="575" y="329" fill="#2c3e50" font-size="13">commissioned</text>
  </g>

  <!-- Label: Dependent -->
  <rect x="625" y="375" width="140" height="24" fill="#fef3e8" rx="12"/>
  <text x="695" y="392" text-anchor="middle" fill="#ED7D31" font-size="12" font-weight="600">Зависимая сущность</text>
  <text x="695" y="412" text-anchor="middle" fill="#6c757d" font-size="11">(скруглённые углы)</text>

  <!-- ===== Relationship line ===== -->
  <!-- Line from parent to child -->
  <line x1="330" y1="235" x2="556" y2="235" stroke="#2c3e50" stroke-width="2"/>

  <!-- Parent side: filled circle (identifying) -->
  <circle cx="556" cy="235" r="6" fill="#2c3e50"/>

  <!-- Cardinality: P on parent side (one or more) -->
  <text x="345" y="228" fill="#4472C4" font-size="14" font-weight="700">P</text>

  <!-- Relationship label -->
  <rect x="400" y="215" width="100" height="22" fill="#f8f9fa" rx="11" stroke="#dee2e6" stroke-width="1"/>
  <text x="450" y="231" text-anchor="middle" fill="#2c3e50" font-size="12" font-weight="600">содержит</text>

  <!-- Legend -->
  <rect x="60" y="425" width="780" height="90" fill="#f8f9fa" stroke="#dee2e6" stroke-width="1" rx="8"/>
  <text x="80" y="450" fill="#2c3e50" font-size="14" font-weight="700">Особенности IDEF1X:</text>

  <!-- Legend items -->
  <rect x="90" y="462" width="40" height="20" fill="white" stroke="#2c3e50" stroke-width="2"/>
  <text x="145" y="478" fill="#2c3e50" font-size="12">Независимая сущность (квадратные углы)</text>

  <rect x="420" y="462" width="40" height="20" fill="white" stroke="#2c3e50" stroke-width="2" rx="6"/>
  <text x="475" y="478" fill="#2c3e50" font-size="12">Зависимая сущность (скруглённые углы)</text>

  <text x="90" y="500" fill="#2c3e50" font-size="12"><tspan font-weight="600">Горизонтальная линия</tspan> внутри сущности отделяет PK-атрибуты (сверху) от остальных (снизу)</text>

  <circle cx="760" cy="470" r="5" fill="#2c3e50"/>
  <text x="775" y="475" fill="#2c3e50" font-size="12">Идентифицирующая связь</text>
</svg>
